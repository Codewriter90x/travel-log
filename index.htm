<!DOCTYPE html>
<html lang="it">
<head>
  <title>üåç Codewriter90x - Travel Stories</title>

	<!-- Meta Tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="Alcune storie vissute quando ho viaggiato per il mondo...">

	<!-- Dark mode -->
	<script>
		const storedTheme = localStorage.getItem('theme')
 
		const getPreferredTheme = () => {
			if (storedTheme) {
				return storedTheme
			}
			return window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'light'
		}

		const setTheme = function (theme) {
			if (theme === 'auto' && window.matchMedia('(prefers-color-scheme: dark)').matches) {
				document.documentElement.setAttribute('data-bs-theme', 'dark')
			} else {
				document.documentElement.setAttribute('data-bs-theme', theme)
			}
		}

		setTheme(getPreferredTheme())

		window.addEventListener('DOMContentLoaded', () => {
		    var el = document.querySelector('.theme-icon-active');
			if(el != 'undefined' && el != null) {
				const showActiveTheme = theme => {
				const activeThemeIcon = document.querySelector('.theme-icon-active use')
				const btnToActive = document.querySelector(`[data-bs-theme-value="${theme}"]`)
				const svgOfActiveBtn = btnToActive.querySelector('.mode-switch use').getAttribute('href')

				document.querySelectorAll('[data-bs-theme-value]').forEach(element => {
					element.classList.remove('active')
				})

				btnToActive.classList.add('active')
				activeThemeIcon.setAttribute('href', svgOfActiveBtn)
			}

			window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
				if (storedTheme !== 'light' || storedTheme !== 'dark') {
					setTheme(getPreferredTheme())
				}
			})

			showActiveTheme(getPreferredTheme())

			document.querySelectorAll('[data-bs-theme-value]')
				.forEach(toggle => {
					toggle.addEventListener('click', () => {
						const theme = toggle.getAttribute('data-bs-theme-value')
						localStorage.setItem('theme', theme)
						setTheme(theme)
						showActiveTheme(theme)
					})
				})

			}
		})
		
	</script>

	<!-- Favicon -->
	<link rel="shortcut icon" href="assets/images/favicon.ico">

	<!-- Google Font -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">

	<!-- Plugins CSS -->
	<link rel="stylesheet" type="text/css" href="assets/vendor/font-awesome/css/all.min.css">
	<link rel="stylesheet" type="text/css" href="assets/vendor/bootstrap-icons/bootstrap-icons.css">
	<link rel="stylesheet" type="text/css" href="assets/vendor/OverlayScrollbars-master/css/OverlayScrollbars.min.css">
	<link rel="stylesheet" type="text/css" href="assets/vendor/tiny-slider/dist/tiny-slider.css">
	<link rel="stylesheet" type="text/css" href="assets/vendor/choices.js/public/assets/styles/choices.min.css">
	<link rel="stylesheet" type="text/css" href="assets/vendor/glightbox-master/dist/css/glightbox.min.css">
	<link rel="stylesheet" type="text/css" href="assets/vendor/dropzone/dist/dropzone.css">
	<link rel="stylesheet" type="text/css" href="assets/vendor/flatpickr/dist/flatpickr.css">
	<link rel="stylesheet" type="text/css" href="assets/vendor/plyr/plyr.css">
	<link rel="stylesheet" type="text/css" href="assets/vendor/zuck.js/dist/zuck.min.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />

	<!-- Theme CSS -->
	<link rel="stylesheet" type="text/css" href="assets/css/style.css">

  <style>
      #map { height: 65vh; width: 100vw; }
  </style>

</head>
<body>
  <div id="app">
    
<!-- ======================= Header START -->
<header class="navbar-light fixed-top header-static bg-mode">
  <main-menu></main-menu>
</header>
<!-- ======================= Header END -->

<!-- **************** MAIN CONTENT START **************** -->
<main>
  <div id="map"></div>
	
	<!-- Container START -->
	<div class="container">
		<div class="row g-4">

	  	<!-- Main content START -->
			<div class="col-md-8 col-lg-9 vstack gap-4">

        <list-stories></list-stories>

			</div>
			<!-- Main content END -->

			<!-- Right sidebar START -->
			<div class="col-lg-3">
        <section>
          <div class="row g-4">
            <!-- Advanced filter responsive toggler START -->
            <div class="d-flex align-items-center d-lg-none">
              <button class="border-0 bg-transparent" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasSideNavbar" aria-controls="offcanvasSideNavbar">
                <span class="btn btn-primary"><i class="fa-solid fa-sliders-h"></i></span>
                <span class="h6 mb-0 fw-bold d-lg-none ms-2">My profile</span>
              </button>
            </div>
            <!-- Advanced filter responsive toggler END -->
            
            <!-- Navbar START-->
            <nav class="navbar navbar-expand-lg mx-0"> 
              <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasSideNavbar">
                <!-- Offcanvas header -->
                <div class="offcanvas-header">
                  <button type="button" class="btn-close text-reset ms-auto" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>

                <!-- Offcanvas body -->
                <div class="offcanvas-body d-block px-2 px-lg-0">
                  <!-- Card START -->
                  <div class="card overflow-hidden">
                    <!-- Cover image -->
                    <div class="h-50px" style="background-image:url(assets/images/bg/01.jpg); background-position: center; background-size: cover; background-repeat: no-repeat;"></div>
                      <!-- Card body START -->
                      <div class="card-body pt-0">
                        <div class="text-center">
                        <!-- Avatar -->
                        <div class="avatar avatar-lg mt-n5 mb-3">
                          <a href="#!"><img class="avatar-img rounded border border-white border-3" src="assets/images/avatar/baron_luca.jpg" alt=""></a>
                        </div>
                        <!-- Info -->
                        <h5 class="mb-0"> <a href="">Luca Baron </a> </h5>
                        <small>Senior Developer</small>
                        <p class="mt-3">I'd love to change the world, but they won‚Äôt give me the source code.</p>

                        <!-- User stat START -->
                        <div class="hstack gap-2 gap-xl-3 justify-content-center">
                          <!-- User stat item -->
                          <div>
                            <h6 class="mb-0">256</h6>
                            <small>Post</small>
                          </div>
                          <!-- Divider -->
                          <div class="vr"></div>
                          <!-- User stat item -->
                          <div>
                            <h6 class="mb-0">2.5K</h6>
                            <small>Followers</small>
                          </div>
                          <!-- Divider -->
                          <div class="vr"></div>
                          <!-- User stat item -->
                          <div>
                            <h6 class="mb-0">365</h6>
                            <small>Following</small>
                          </div>
                        </div>
                        <!-- User stat END -->
                      </div>

                      <!-- Divider -->
                      <hr>

                      <!-- Side Nav START -->
                      
                      <!-- Side Nav END -->
                    </div>
                    <!-- Card body END -->
                    <!-- Card footer -->
                    <div class="card-footer text-center py-2">
                      <a class="btn btn-link btn-sm" href="my-profile.html">View Profile </a>
                    </div>
                  </div>
                  <!-- Card END -->

                  <!-- Helper link START -->
                  <!-- <ul class="nav small mt-4 justify-content-center lh-1">
                    <li class="nav-item">
                      <a class="nav-link" href="my-profile-about.html">About</a>
                    </li>
                  </ul> -->
                  <!-- Helper link END -->
                  <!-- Copyright -->
                  <p class="small text-center mt-1">¬©2025 <a class="text-reset" target="_blank" href="https://www.4Safe.online/"> 4Safe </a></p>
                </div>
              </div>
            </nav>
            <!-- Navbar END-->

          </div>
        </section>
			</div>
			<!-- Right sidebar END -->

		</div> <!-- Row END -->
	</div>
	<!-- Container END -->

</main>
<!-- **************** MAIN CONTENT END **************** -->


<!-- =======================
JS libraries, plugins and custom scripts -->

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>

<!-- Bootstrap JS -->
<script src="assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>

<!-- Vendors -->
<script src="assets/vendor/tiny-slider/dist/tiny-slider.js"></script>
<script src="assets/vendor/OverlayScrollbars-master/js/OverlayScrollbars.min.js"></script>
<script src="assets/vendor/choices.js/public/assets/scripts/choices.min.js"></script>
<script src="assets/vendor/glightbox-master/dist/js/glightbox.min.js"></script>
<script src="assets/vendor/flatpickr/dist/flatpickr.min.js"></script>
<script src="assets/vendor/plyr/plyr.js"></script>
<!-- <script src="assets/vendor/dropzone/dist/min/dropzone.min.js"></script> -->
<!-- <script src="assets/vendor/zuck.js/dist/zuck.min.js"></script> -->
<!-- <script src="assets/js/zuck-stories.js"></script> -->

<!-- Theme Functions -->
<script src="assets/js/functions.js"></script>


<script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
<script src="assets/js/article.js"></script>
<script src="src/js/map.js"></script>  

<script id="MainMenu">
  const MainMenu = {
    template: `<div v-html="html"></div>`,
    data() {
      return {
        html: ''
      };
    },
    mounted() {
      fetch('components/nav-header.html')
        .then(res => res.text())
        .then(html => {
          this.html = html;
        });
    }
  };
</script>
<script id="ListStories">
  const ListStories = {
    template: `<div v-html="html"></div>`,
    data() {
      return { html: '' };
    },
    mounted() {
      fetch('components/list-stories.html')
        .then(res => res.text())
        .then(html => {
          this.html = html;
          setTimeout(() => {
            loadStories(currentLang);
          }, 200); 
        });
    }
  };
</script>
<script>
  const { createApp } = Vue;

  createApp({
    data() {
      return {
        lang: 'it',
        stories: [],
        title: 'Travel Stories'
      };
    },
    computed: {
      sortedStories() {
        return this.stories.sort((a, b) => new Date(b.date) - new Date(a.date));
      }
    },
    methods: {
      switchLang(l) {
        this.lang = l;
        this.loadStories();
      },
      loadStories() {
        const files = [
          'articles/romania.json'
        ];
        Promise.all(files.map(f => fetch(f).then(res => res.json())))
          .then(allData => {
            let combined = [];
            allData.forEach(data => {
              const list = data.translations[this.lang]?.stories || data.translations['en'].stories;
              list.forEach(story => {
                story.country = data.country || '';
                combined.push(story);
              });
            });
            this.stories = combined;
            this.scrollToHash();
          });
      },
      copyLink(id) {
        const url = `${location.origin}${location.pathname}#${id}`;
        navigator.clipboard.writeText(url).then(() => alert('Link copiato!'));
      },
      scrollToHash() {
        const hash = location.hash.substring(1);
        if (hash) {
          setTimeout(() => {
            const el = document.getElementById(hash);
            if (el) el.scrollIntoView({ behavior: 'smooth' });
          }, 300);
        }
      }
    },
    mounted() {
      this.loadStories();
    }
  })
  .component('main-menu', MainMenu) 
  .component('list-stories', ListStories) 
  .mount('#app');
</script>



    <!-- <header>
      <h1>üåç {{ title }}</h1>
      <div class="lang-switcher">
        <button @click="switchLang('it')">üáÆüáπ Italiano</button>
        <button @click="switchLang('en')">üá¨üáß English</button>
      </div>
    </header>

    <div v-for="story in sortedStories" :key="story.id" class="story" :id="story.id">
      <img v-if="story.photo" :src="story.photo" :alt="story.title">
      <h2>{{ story.title }}</h2>
      <div class="meta">
        {{ story.date }} {{ story.city ? '‚Äî ' + story.city : '' }} {{ story.country ? '(' + story.country + ')' : '' }}
        <span class="copy-link" @click="copyLink(story.id)" title="Copia link">üîó</span>
      </div>
      <div class="content" v-html="story.content"></div>
      <div class="tags" v-if="story.tags">
        <span v-for="tag in story.tags" :key="tag">{{ tag }}</span>
      </div>
    </div>
  </div>

   -->
</body>
</html>
